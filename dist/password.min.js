/**
 * @author Òscar Casajuana a.k.a. elboletaire <elboletaire at underave dot net>
 * @link https://github.com/elboletaire/password-strength-meter
 * @license GPL-3.0
 *
 * @version 2.2.0
 */
!function(p){"use strict";function s(i,r){var c="",l={isValid:!1,conditionsPassed:0,hasLowercase:!1,hasUppercase:!1,hasNumber:!1,hasSpecial:!1};function d(e,s){for(var o="",t=!1,a=0;a<s.length;a++){for(var t=!0,n=0;n<e&&n+a+e<s.length;n++)t=t&&s.charAt(n+a)===s.charAt(n+a+e);(t=n<e?!1:t)?(a+=e-1,t=!1):o+=s.charAt(a)}return o}function h(e,s){var o;return r.useColorBarImage?e.css({backgroundPosition:"0px -"+s+"px",width:s+"%"}):(o=function(e){var s=0,o=240,t=0,a=240,n=10;Object.prototype.hasOwnProperty.call(r.customColorBarRGB,"red")&&(s=r.customColorBarRGB.red[0],o=r.customColorBarRGB.red[1]),Object.prototype.hasOwnProperty.call(r.customColorBarRGB,"green")&&(t=r.customColorBarRGB.green[0],a=r.customColorBarRGB.green[1]),Object.prototype.hasOwnProperty.call(r.customColorBarRGB,"blue")&&(n=r.customColorBarRGB.blue);var i=e*a/50;return{red:Math.min(Math.max(2*o-e*o/50,s),o),green:Math.min(Math.max(i,t),a),blue:n}}(s),e.css({"background-image":"none","background-color":"rgb("+o.red.toString()+", "+o.green.toString()+", "+o.blue.toString()+")",width:s+"%"})),e}return r=p.extend({},{enterPass:"Type your password",shortPass:"The password is too short",containsField:"The password contains your name",notAllowed:"The password contains a commonly used word",steps:{13:"Really insecure password",33:"Weak; try combining letters & numbers",67:"Medium; try using special characters",94:"Strong password"},showPercent:!1,showText:!0,animate:!0,animateSpeed:"fast",fields:!1,fieldsPartialMatch:!0,contains:[],appendContainsMatch:!1,conditions:{lowercase:"",uppercase:"",number:"",special:""},conditionsRequired:[],minimumConditions:0,minimumLength:4,closestSelector:"div",useColorBarImage:!1,customColorBarRGB:{red:[0,240],green:[0,240],blue:10}},r),function(){var e=!0,t=r.showText,a=r.showPercent,s=p("<div>").addClass("pass-graybar"),n=p("<div>").addClass("pass-colorbar"),o=p("<div>").addClass("pass-wrapper").append(s.append(n));return i.closest(r.closestSelector).addClass("pass-strength-visible"),r.animate&&(o.css("display","none"),e=!1,i.closest(r.closestSelector).removeClass("pass-strength-visible")),r.showPercent&&(a=p("<span>").addClass("pass-percent").text("0%"),o.append(a)),r.showText&&(t=p("<span>").addClass("pass-text").html(r.enterPass),o.append(t)),i.closest(r.closestSelector).append(o),i.keyup(function(){var e,s=r.fields||r.field||"";s&&(o=p(s),e=[],o.each(function(){p(this).val()&&e.push(p(this).val().toLowerCase())}));s=function(e,s){var o=0;if(e.length<r.minimumLength)return p(".has-pw-condition").removeClass("has-pw-condition"),i.trigger("notValid"),-1;if(r.fields||r.field){if(s.includes(e.toLowerCase()))return i.trigger("notValid"),p(".has-pw-condition").removeClass("has-pw-condition"),-2;if((r.fieldsPartialMatch||r.fieldPartialMatch)&&s.length)for(var t of s)if(e.toLowerCase().includes(t))return c=": "+t,p(".has-pw-condition").removeClass("has-pw-condition"),i.trigger("notValid"),-2}if(1<=r.contains.length)for(var a of r.contains)if(e.toLowerCase().includes(a.toLowerCase()))return c=": "+a,p(".has-pw-condition").removeClass("has-pw-condition"),i.trigger("notValid"),-3;o+=4*e.length,o+=d(1,e).length-e.length,o+=d(2,e).length-e.length,o+=d(3,e).length-e.length,o+=d(4,e).length-e.length,e.match(/([0-9])/)?l.hasNumber=!0:l.hasNumber=!1,e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(o+=5);var n=new RegExp(/([$-/:-?{-~!"^_`¬\[\]])/);e.match(n)?l.hasSpecial=!0:l.hasSpecial=!1;var s=new RegExp(/([$-/:-?{-~!"^_`¬\[\]].*[$-/:-?{-~!"^_`¬\[\]])/);return e.match(s)&&(o+=5),e.match(/([a-z])/)?l.hasLowercase=!0:l.hasLowercase=!1,e.match(/([A-Z])/)?l.hasUppercase=!0:l.hasUppercase=!1,e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(o+=10),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(o+=15),e.match(/([!@#$%^&*?_~])/)&&e.match(/([0-9])/)&&(o+=15),e.match(/([!@#$%^&*?_~])/)&&e.match(/([a-zA-Z])/)&&(o+=15),(e.match(/^\w+$/)||e.match(/^\d+$/))&&(o-=10),(o=100<o?100:o)<0&&(o=0),n=0,s=!r.conditionsRequired.length,l.hasLowercase?(n++,r.conditionsRequired.includes("lowercase")&&(s=!0),r.conditions.lowercase&&p(r.conditions.lowercase).addClass("has-pw-condition")):p(r.conditions.lowercase).removeClass("has-pw-condition"),l.hasUppercase?(n++,r.conditionsRequired.includes("uppercase")&&(s=!0),r.conditions.uppercase&&p(r.conditions.uppercase).addClass("has-pw-condition")):p(r.conditions.uppercase).removeClass("has-pw-condition"),l.hasNumber?(n++,r.conditionsRequired.includes("number")&&(s=!0),r.conditions.number&&p(r.conditions.number).addClass("has-pw-condition")):p(r.conditions.number).removeClass("has-pw-condition"),l.hasSpecial?(n++,r.conditionsRequired.includes("special")&&(s=!0),r.conditions.special&&p(r.conditions.special).addClass("has-pw-condition")):p(r.conditions.special).removeClass("has-pw-condition"),console.log("passed:"+n+" :: options.minimumConditions  "+r.minimumConditions+" :: requiredPassed  "+s),n&&n>=r.minimumConditions&&s?(l.isValid=!0,i.trigger("isValid",[l])):i.trigger("notValid",[l]),o}(i.val(),e);i.trigger("password.score",[s]);var o=s<0?0:s;n=h(n,o),r.showPercent&&a.html(o+"%"),r.showText&&(o=function(e){if(-1===e)return r.shortPass;if(-2===e)return r.containsField;if(-3===e)return r.appendContainsMatch?r.notAllowed+c:r.notAllowed;e=e<0?0:e;var s,o=r.shortPass,t=Object.keys(r.steps).sort();for(s in t){var a=t[s];a<e&&(o=r.steps[a])}return o}(s),!i.val().length&&s<=0&&(o=r.enterPass),t.html()!==p("<div>").html(o).html()&&(t.html(o),i.trigger("password.text",[o,s])))}),r.animate&&(i.focus(function(){e||o.slideDown(r.animateSpeed,function(){e=!0,i.closest(r.closestSelector).addClass("pass-strength-visible")})}),i.blur(function(){!i.val().length&&e&&o.slideUp(r.animateSpeed,function(){e=!1,i.closest(r.closestSelector).removeClass("pass-strength-visible")})})),this}.call(this)}p.fn.password=function(e){return this.each(function(){new s(p(this),e)})}}(jQuery);