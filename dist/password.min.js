/**
 * @author Òscar Casajuana a.k.a. elboletaire <elboletaire at underave dot net>
 * @link https://github.com/elboletaire/password-strength-meter
 * @license GPL-3.0
 *
 * @version 2.2.0
 */
!function(p){"use strict";function s(r,i){var c="",l={isValid:!1,conditionsPassed:0,hasLowercase:!1,hasUppercase:!1,hasNumber:!1,hasSpecial:!1};function d(e,s){for(var a="",t=!1,o=0;o<s.length;o++){for(var t=!0,n=0;n<e&&n+o+e<s.length;n++)t=t&&s.charAt(n+o)===s.charAt(n+o+e);(t=n<e?!1:t)?(o+=e-1,t=!1):a+=s.charAt(o)}return a}function h(e,s){var a;return i.useColorBarImage?e.css({backgroundPosition:"0px -"+s+"px",width:s+"%"}):(a=function(e){var s=0,a=240,t=0,o=240,n=10;Object.prototype.hasOwnProperty.call(i.customColorBarRGB,"red")&&(s=i.customColorBarRGB.red[0],a=i.customColorBarRGB.red[1]),Object.prototype.hasOwnProperty.call(i.customColorBarRGB,"green")&&(t=i.customColorBarRGB.green[0],o=i.customColorBarRGB.green[1]),Object.prototype.hasOwnProperty.call(i.customColorBarRGB,"blue")&&(n=i.customColorBarRGB.blue);var r=e*o/50;return{red:Math.min(Math.max(2*a-e*a/50,s),a),green:Math.min(Math.max(r,t),o),blue:n}}(s),e.css({"background-image":"none","background-color":"rgb("+a.red.toString()+", "+a.green.toString()+", "+a.blue.toString()+")",width:s+"%"})),e}return i=p.extend({},{enterPass:"Type your password",shortPass:"The password is too short",containsField:"The password contains your name",notAllowed:"The password contains a commonly used word",steps:{13:"Really insecure password",33:"Weak; try combining letters & numbers",67:"Medium; try using special characters",94:"Strong password"},showPercent:!1,showText:!0,animate:!0,animateSpeed:"fast",fields:!1,fieldsPartialMatch:!0,contains:[],appendContainsMatch:!1,conditions:{lowercase:"",uppercase:"",number:"",special:""},conditionsRequired:[],minimumConditions:0,minimumLength:4,closestSelector:"div",useColorBarImage:!1,customColorBarRGB:{red:[0,240],green:[0,240],blue:10}},i),function(){var e=!0,t=i.showText,o=i.showPercent,s=p("<div>").addClass("pass-graybar"),n=p("<div>").addClass("pass-colorbar"),a=p("<div>").addClass("pass-wrapper").append(s.append(n));return r.closest(i.closestSelector).addClass("pass-strength-visible"),i.animate&&(a.css("display","none"),e=!1,r.closest(i.closestSelector).removeClass("pass-strength-visible")),i.showPercent&&(o=p("<span>").addClass("pass-percent").text("0%"),a.append(o)),i.showText&&(t=p("<span>").addClass("pass-text").html(i.enterPass),a.append(t)),r.closest(i.closestSelector).append(a),r.keyup(function(){var e,s=i.fields||i.field||"";s&&(a=p(s),e=[],a.each(function(){p(this).val()&&e.push(p(this).val().toLowerCase())}));s=function(e,s){var a=0;if(e.length<i.minimumLength)return p(".has-pw-condition").removeClass("has-pw-condition"),r.trigger("notValid"),-1;if(i.fields||i.field){if(s.includes(e.toLowerCase()))return r.trigger("notValid"),p(".has-pw-condition").removeClass("has-pw-condition"),-2;if((i.fieldsPartialMatch||i.fieldPartialMatch)&&s.length)for(var t of s)if(e.toLowerCase().includes(t))return c=": "+t,p(".has-pw-condition").removeClass("has-pw-condition"),r.trigger("notValid"),-2}if(1<=i.contains.length)for(var o of i.contains)if(e.toLowerCase().includes(o.toLowerCase()))return c=": "+o,p(".has-pw-condition").removeClass("has-pw-condition"),r.trigger("notValid"),-3;a+=4*e.length,a+=d(1,e).length-e.length,a+=d(2,e).length-e.length,a+=d(3,e).length-e.length,a+=d(4,e).length-e.length,e.match(/([0-9])/)?l.hasNumber=!0:l.hasNumber=!1,e.match(/(.*[0-9].*[0-9].*[0-9])/)&&(a+=5);var n=new RegExp(/([$-/:-?{-~!"^_`¬\[\]])/);return e.match(n)?l.hasSpecial=!0:l.hasSpecial=!1,s=new RegExp(/([$-/:-?{-~!"^_`¬\[\]].*[$-/:-?{-~!"^_`¬\[\]])/),e.match(s)&&(a+=5),e.match(/([a-z])/)?l.hasLowercase=!0:l.hasLowercase=!1,e.match(/([A-Z])/)?l.hasUppercase=!0:l.hasUppercase=!1,e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(a+=10),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(a+=15),e.match(/([!@#$%^&*?_~])/)&&e.match(/([0-9])/)&&(a+=15),e.match(/([!@#$%^&*?_~])/)&&e.match(/([a-zA-Z])/)&&(a+=15),(e.match(/^\w+$/)||e.match(/^\d+$/))&&(a-=10),(a=100<a?100:a)<0&&(a=0),n=0,s=!1,l.hasLowercase?(n++,i.conditionsRequired.includes("lowercase")&&(s=!0),i.conditions.lowercase&&p(i.conditions.lowercase).addClass("has-pw-condition")):p(i.conditions.lowercase).removeClass("has-pw-condition"),l.hasUppercase?(n++,i.conditionsRequired.includes("uppercase")&&(s=!0),i.conditions.uppercase&&p(i.conditions.uppercase).addClass("has-pw-condition")):p(i.conditions.uppercase).removeClass("has-pw-condition"),l.hasNumber?(n++,i.conditionsRequired.includes("number")&&(s=!0),i.conditions.number&&p(i.conditions.number).addClass("has-pw-condition")):p(i.conditions.number).removeClass("has-pw-condition"),l.hasSpecial?(n++,i.conditionsRequired.includes("special")&&(s=!0),i.conditions.special&&p(i.conditions.special).addClass("has-pw-condition")):p(i.conditions.special).removeClass("has-pw-condition"),n&&n>=i.minimumConditions&&s?(l.isValid=!0,r.trigger("isValid",[l])):r.trigger("notValid",[l]),a}(r.val(),e);r.trigger("password.score",[s]);var a=s<0?0:s;n=h(n,a),i.showPercent&&o.html(a+"%"),i.showText&&(a=function(e){if(-1===e)return i.shortPass;if(-2===e)return i.containsField;if(-3===e)return i.appendContainsMatch?i.notAllowed+c:i.notAllowed;e=e<0?0:e;var s,a=i.shortPass,t=Object.keys(i.steps).sort();for(s in t){var o=t[s];o<e&&(a=i.steps[o])}return a}(s),!r.val().length&&s<=0&&(a=i.enterPass),t.html()!==p("<div>").html(a).html()&&(t.html(a),r.trigger("password.text",[a,s])))}),i.animate&&(r.focus(function(){e||a.slideDown(i.animateSpeed,function(){e=!0,r.closest(i.closestSelector).addClass("pass-strength-visible")})}),r.blur(function(){!r.val().length&&e&&a.slideUp(i.animateSpeed,function(){e=!1,r.closest(i.closestSelector).removeClass("pass-strength-visible")})})),this}.call(this)}p.fn.password=function(e){return this.each(function(){new s(p(this),e)})}}(jQuery);